(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{464:function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return o}));r(100),r(105);var n=function(t,e){return e.includes(t)},o=function(t,e){return-1!==e.indexOf(t)}},465:function(t,e,r){var content=r(467);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(107).default)("1b769948",content,!0,{sourceMap:!1})},466:function(t,e,r){"use strict";r(465)},467:function(t,e,r){var n=r(106)(!1);n.push([t.i,"input.transparent-input,input.transparent-input.focus,input.transparent-input:disabled{background-color:transparent!important;border:none!important;box-shadow:transparent!important;padding:0!important;height:auto!important}",""]),t.exports=n},476:function(t,e,r){"use strict";r.r(e);r(14),r(13),r(15),r(16);var n=r(8),o=r(3),l=(r(32),r(34),r(12),r(31),r(42),r(33),r(70),r(11),r(45),r(75),r(119),r(30)),c=r(77),d=r(60),f=r(4),_=r(464);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v={name:"table-list",data:function(){return{view:"freightSettlement",fields:[{key:"type",label:"Tipo",sortable:!0,class:"text-center"},{key:"round_trip",label:"Viaje Redondo",sortable:!0,class:"text-center"},{key:"date",label:"Fecha",sortable:!0,class:"text-center"},{key:"referral_number",label:"Numero Remisi贸n",sortable:!0,class:"text-center"},{key:"receipt_number",label:"Numero Recibo",sortable:!0,class:"text-center"},{key:"material_name",label:"Material",sortable:!0,class:"text-center"},{key:"conveyor_company_name",label:"Emp. Transportadora",sortable:!0,class:"text-center"},{key:"origin_supplier",label:"Patio Despacho / Proveedor",sortable:!0,class:"text-center"},{key:"destiny_customer",label:"Patio Recepci贸n / Cliente",sortable:!0,class:"text-center"},{key:"net_weight",label:"Cant. Despacho",sortable:!0,class:"text-center"},{key:"aux_net_weight",label:"Cant. Recepci贸n",sortable:!0,class:"text-center"},{key:"freight_price",label:"Valor Unitario",sortable:!0,class:"text-center"},{key:"net_price",label:"Valor Neto",sortable:!0,class:"text-center"},{key:"settle_receipt_weight",label:"Liquidar Cantidad Recibida",sortable:!0,class:"text-center"}],start_date:null,final_date:null,conveyor_company:null,showSettlement:!1,showList:!1,observations:"",retention:"1.00",conveyor_company_settled:"",start_date_settled:null,final_date_settled:null,labelTextFieldRequired:"Campo obligatorio",arrayTiquets:[]}},watch:{freightSettlements:function(t){this.showSettlement=Object(_.a)("".concat(this.view,".settle"),this.userPermisionsGroup),this.showList=Object(_.a)("".concat(this.view,".list"),this.userPermisionsGroup)}},computed:m(m(m(m({},Object(l.d)(f.typesCommon.PATH,["userPermisionsGroup"])),Object(l.d)(c.typesFreightSettlement.PATH,["freightSettlements","freightSettlement"])),Object(l.d)(d.typesThird.PATH,["localeConveyorThirds"])),{},{items:function(){return this.freightSettlements.data.map((function(t){return m(m({},t),{},{settle_receipt_weight:!1})}))},subtotalWeight:function(){var t,e=0;return this.items.forEach((function(element){t=element.settle_receipt_weight?element.aux_net_weight.toString().replace(/,/g,""):element.net_weight.toString().replace(/,/g,""),e+=parseFloat(t)})),this.formatDecimal(e)},totalValue:function(){var t=0;return this.items.forEach((function(element){t+=parseFloat(element.net_price.toString().replace(/,/g,""))})),this.formatDecimal(t)},subtotalRetention:function(){var t=parseFloat(this.totalValue.toString().replace(/,/g,""))/100*parseFloat(this.retention.toString().replace(/,/g,""));return this.formatDecimal(t)},totalSettle:function(){var t=parseFloat(this.totalValue.toString().replace(/,/g,""))-parseFloat(this.subtotalRetention.toString().replace(/,/g,""));return this.formatDecimal(t)},stateFilterDisabled:function(){return null===this.start_date||""===this.start_date||null===this.final_date||""===this.final_date||""===this.conveyor_company||null===this.conveyor_company||this.final_date<this.start_date},stateStartDate:function(){return null!==this.start_date&&""!==this.start_date},stateFinalDate:function(){return null!==this.final_date&&""!==this.final_date},stateConveyorCompany:function(){return null!==this.conveyor_company&&""!==this.conveyor_company},disableButtonSettle:function(){var t=!1;return this.items.forEach((function(element){null!==element.net_price&&""!==element.net_price&&0!==parseFloat(element.net_price.toString().replace(/,/g,""))||(t=!0)})),t}}),created:function(){this.searchConveyorThirds()},methods:m(m(m({},Object(l.b)(c.typesFreightSettlement.PATH,{getFreightSettlements:c.typesFreightSettlement.actions.GET_FREIGHT_SETTLEMENTS,settle:c.typesFreightSettlement.actions.SAVE,print:c.typesFreightSettlement.actions.PRINT})),Object(l.b)(d.typesThird.PATH,{getConveyorThirds:d.typesThird.actions.GET_CONVEYOR_THIRDS})),{},{search:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.retention="1.00",t.observations="",e.next=4,t.getFreightSettlements({startDate:t.start_date,finalDate:t.final_date,conveyorCompany:t.conveyor_company});case 4:t.conveyor_company_settled=(null===(r=t.localeConveyorThirds)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.filter((function(e){return e.id===t.conveyor_company})).map((function(t){return t.nit}))[0])+"/"+(null===(o=t.localeConveyorThirds)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.filter((function(e){return e.id===t.conveyor_company})).map((function(t){return t.name}))[0]),t.start_date_settled=t.start_date,t.final_date_settled=t.final_date;case 7:case"end":return e.stop()}}),e)})))()},searchConveyorThirds:function(t){var data={type:"CONTRATISTA",start_date:this.start_date,final_date:this.final_date};this.getConveyorThirds(data)},formatDecimal:function(t){return"."===t||"0."===t?"0.":null===(t=(t=(t=null===t||""===t.toString().trim()||"-"===t.toString().trim()?0:t).toString().replace(/[^0-9.-]/g,"")).toString())||""===t||0===parseFloat(t)?0:(t=(t="0."===t.substring(0,2)?t:t.replace(/^0+/,"")).replace(/[^0-9.-]/g,""),t=(t=(t=parseFloat(t)<0?-1*parseFloat(t):t).toString().match(/^-?\d+(?:\.\d{0,2})?/)[0]).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))},cleanFiltersStartDate:function(){this.final_date=null,this.conveyor_company=null},recalculateValues:function(t){var e=(this.items[t].settle_receipt_weight?parseFloat(this.items[t].aux_net_weight.toString().replace(/,/g,"")):parseFloat(this.items[t].net_weight.toString().replace(/,/g,"")))*parseFloat(this.items[t].freight_price.toString().replace(/,/g,""));this.items[t].net_price=this.formatDecimal(e)},save:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.arrayTiquets=[],t.items.forEach((function(element){var e={id:element.id,net_value:parseFloat(element.net_price.toString().replace(/,/g,"")),settle_receipt_weight:element.settle_receipt_weight,weight_settled:element.settle_receipt_weight?element.aux_net_weight:element.net_weight,unit_value:parseFloat(element.freight_price.toString().replace(/,/g,""))};t.arrayTiquets.push(e)})),e.next=4,t.settle({tiquets:t.arrayTiquets,type:"F",retentionPercentage:parseFloat(t.retention.toString().replace(/,/g,"")),retention:parseFloat(t.subtotalRetention.toString().replace(/,/g,"")),subtotalSettle:parseFloat(t.totalValue.toString().replace(/,/g,"")),subtotalWeight:parseFloat(t.subtotalWeight.toString().replace(/,/g,"")),totalSettle:parseFloat(t.totalSettle.toString().replace(/,/g,"")),third:t.conveyor_company_settled,startDate:t.start_date_settled,finalDate:t.final_date_settled,observations:t.observations});case 4:null!==t.freightSettlement&&t.printReport();case 5:case"end":return e.stop()}}),e)})))()},printReport:function(){this.print(this.freightSettlement)}})},y=(r(466),r(69)),component=Object(y.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-card",{attrs:{title:"Liquidar Fletes","sub-title":"Opci贸n Para Liquidacion de Fletes"}},[r("b-form-group",{staticClass:"mb-1"},[r("b-form-row",[r("b-col",{attrs:{md:"4"}},[r("label",{attrs:{for:"feedback-start-date"}},[t._v("Fecha Inicial")]),t._v(" "),r("b-form-datepicker",{attrs:{id:"feedback-start-date",placeholder:"Seleccione la Fecha Inicial",max:t.final_date},on:{input:t.cleanFiltersStartDate},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}}),t._v(" "),r("b-form-invalid-feedback",{attrs:{state:t.stateStartDate}},[t._v("\n            "+t._s(t.labelTextFieldRequired)+"\n          ")])],1),t._v(" "),r("b-col",{attrs:{md:"4"}},[r("label",{attrs:{for:"feedback-final-date"}},[t._v("Fecha Final")]),t._v(" "),r("b-form-datepicker",{attrs:{id:"feedback-final-date",placeholder:"Seleccione la Fecha Final",min:t.start_date},on:{input:t.searchConveyorThirds},model:{value:t.final_date,callback:function(e){t.final_date=e},expression:"final_date"}}),t._v(" "),r("b-form-invalid-feedback",{attrs:{state:t.stateFinalDate}},[t._v("\n            "+t._s(t.labelTextFieldRequired)+"\n          ")])],1),t._v(" "),r("b-col",{attrs:{md:"4"}},[r("label",{attrs:{for:"feedback-conveyor"}},[t._v("Empresa Transportadora")]),t._v(" "),t.localeConveyorThirds&&t.localeConveyorThirds.data?r("v-select",{attrs:{id:"feedback-conveyor",required:"",options:t.localeConveyorThirds.data,label:"name",reduce:function(data){return data.id},clearable:!1},model:{value:t.conveyor_company,callback:function(e){t.conveyor_company=e},expression:"conveyor_company"}}):t._e(),t._v(" "),r("b-form-invalid-feedback",{attrs:{state:t.stateConveyorCompany}},[t._v("\n              "+t._s(t.labelTextFieldRequired)+"\n            ")])],1)],1)],1),t._v(" "),r("b-button",{attrs:{disabled:t.stateFilterDisabled},on:{click:t.search}},[t._v("Filtrar")]),t._v(" "),t.showList?[r("b-table",{attrs:{striped:!0,bordered:!0,hover:!0,fixed:!0,items:t.items,fields:t.fields,stacked:"md","show-empty":"",small:""},scopedSlots:t._u([{key:"cell(round_trip)",fn:function(e){return["T"===e.item.type_code?r("b-form-checkbox",{attrs:{checked:"1"===e.item.round_trip,disabled:!0}}):t._e()]}},{key:"cell(aux_net_weight)",fn:function(e){return["T"===e.item.type_code&&"U"!==e.item.material_unit||e.item.settle_receipt_weight&&"V"===e.item.type_code?r("b-form-input",{staticClass:"transparent-input text-center",attrs:{disabled:!e.item.settle_receipt_weight||"T"==e.item.type_code,formatter:t.formatDecimal},on:{input:function(r){return t.recalculateValues(e.index)}},model:{value:e.item.aux_net_weight,callback:function(r){t.$set(e.item,"aux_net_weight",r)},expression:"row.item.aux_net_weight"}}):t._e()]}},{key:"cell(freight_price)",fn:function(e){return[r("b-form-input",{staticClass:"transparent-input text-center",attrs:{formatter:t.formatDecimal},on:{input:function(r){return t.recalculateValues(e.index)}},model:{value:e.item.freight_price,callback:function(r){t.$set(e.item,"freight_price",r)},expression:"row.item.freight_price"}})]}},{key:"cell(settle_receipt_weight)",fn:function(e){return["U"!==e.item.material_unit&&"C"!==e.item.type_code?r("b-form-checkbox",{on:{change:function(r){return t.recalculateValues(e.index)}},model:{value:e.item.settle_receipt_weight,callback:function(r){t.$set(e.item,"settle_receipt_weight",r)},expression:"row.item.settle_receipt_weight"}}):t._e()]}},t.items&&t.items.length>0?{key:"custom-foot",fn:function(){return[r("tr",[r("td",{staticClass:"text-right font-weight-bold",attrs:{colspan:"9"}},[t._v("\n            SUBTOTAL\n          ")]),t._v(" "),r("td",{staticClass:"font-weight-bold",attrs:{colspan:"1"}},[r("b-form-input",{staticClass:"transparent-input  text-center",attrs:{formatter:t.formatDecimal,disabled:!0},model:{value:t.subtotalWeight,callback:function(e){t.subtotalWeight=e},expression:"subtotalWeight"}})],1),t._v(" "),r("td",{staticClass:"font-weight-bold",attrs:{colspan:"1"}}),t._v(" "),r("td",{staticClass:"font-weight-bold",attrs:{colspan:"1"}}),t._v(" "),r("td",{staticClass:"font-weight-bold",attrs:{colspan:"1"}},[r("b-form-input",{staticClass:"transparent-input  text-center",attrs:{formatter:t.formatDecimal,disabled:!0},model:{value:t.totalValue,callback:function(e){t.totalValue=e},expression:"totalValue"}})],1),t._v(" "),r("td",{staticClass:"font-weight-bold",attrs:{colspan:"1"}})]),t._v(" "),r("tr",[r("td",{staticClass:"text-right font-weight-bold",attrs:{colspan:"9"}},[t._v("\n            RETENCION EN LA FUENTE\n          ")]),t._v(" "),r("td",{staticClass:"font-weight-bold",attrs:{colspan:"1"}},[r("b-form-input",{staticClass:"text-center",attrs:{formatter:t.formatDecimal},model:{value:t.retention,callback:function(e){t.retention=e},expression:"retention"}})],1),t._v(" "),r("td",{staticClass:"font-weight-bold",attrs:{colspan:"1"}}),t._v(" "),r("td",{staticClass:"font-weight-bold",attrs:{colspan:"1"}}),t._v(" "),r("td",{staticClass:"font-weight-bold",attrs:{colspan:"1"}},[r("b-form-input",{staticClass:"transparent-input text-center",attrs:{formatter:t.formatDecimal,disabled:!0},model:{value:t.subtotalRetention,callback:function(e){t.subtotalRetention=e},expression:"subtotalRetention"}})],1),t._v(" "),r("td",{staticClass:"font-weight-bold",attrs:{colspan:"1"}})]),t._v(" "),r("tr",[r("td",{staticClass:"text-right font-weight-bold",attrs:{colspan:"9"}},[t._v("\n            TOTAL\n          ")]),t._v(" "),r("td",{staticClass:"font-weight-bold",attrs:{colspan:"1"}}),t._v(" "),r("td",{staticClass:"font-weight-bold",attrs:{colspan:"1"}}),t._v(" "),r("td",{staticClass:"font-weight-bold",attrs:{colspan:"1"}}),t._v(" "),r("td",{staticClass:"font-weight-bold",attrs:{colspan:"1"}},[r("b-form-input",{staticClass:"transparent-input text-center",attrs:{formatter:t.formatDecimal,disabled:!0},model:{value:t.totalSettle,callback:function(e){t.totalSettle=e},expression:"totalSettle"}})],1),t._v(" "),r("td",{staticClass:"font-weight-bold",attrs:{colspan:"1"}})]),t._v(" "),r("tr",[r("td",{staticClass:"text-right font-weight-bold",attrs:{colspan:"9"}},[t._v("\n            OBSERVACIONES\n          ")]),t._v(" "),r("td",{staticClass:"font-weight-bold",attrs:{colspan:"4"}},[r("b-form-textarea",{attrs:{placeholder:"Escriba sus observaciones",rows:"3",maxLength:"200"},model:{value:t.observations,callback:function(e){t.observations=e},expression:"observations"}})],1),t._v(" "),r("td",{staticClass:"font-weight-bold text-center align-middle",attrs:{colspan:"1"}},[t.showSettlement?r("b-button",{attrs:{disabled:t.disableButtonSettle},on:{click:function(e){return t.save()}}},[t._v("Liquidar")]):t._e()],1)])]},proxy:!0}:null],null,!0)})]:t._e()],2)}),[],!1,null,null,null);e.default=component.exports}}]);