(window.webpackJsonp=window.webpackJsonp||[]).push([[27,6,7],{464:function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return o}));r(100),r(105);var n=function(t,e){return e.includes(t)},o=function(t,e){return-1!==e.indexOf(t)}},469:function(t,e,r){"use strict";r.r(e);r(14),r(13),r(15),r(12),r(16);var n=r(8),o=r(3),l=(r(32),r(34),r(11),r(31),r(144),r(30)),c=r(56),d=r(4),m=r(37),f=r(47),h=r(0),y=r(464);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function _(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var j={name:"table-list",components:{BIconPencilFill:h.er,BIconTrashFill:h.Pv},data:function(){return{view:"adjustment",fields:[{key:"type",label:"Tipo",sortable:!0,class:"text-center"},{key:"yardName",label:"Patio",sortable:!0,class:"text-center"},{key:"materialName",label:"Material",sortable:!0,class:"text-center"},{key:"amount",label:"Cantidad",sortable:!0,class:"text-center"},{key:"date",label:"Fecha",sortable:!0,class:"text-center"},{key:"actions",label:"Acciones",class:"text-center"}],totalRows:1,currentPage:1,perPage:10,pageOptions:[10,25,50,{value:100,text:"Mostrar muchos"}],sortBy:"",filter:null,showInsert:!1,showList:!1}},computed:_(_(_({},Object(l.d)(d.typesCommon.PATH,["userPermisionsGroup"])),Object(l.d)(c.typesAdjustment.PATH,["adjustments","adjustment"])),{},{items:function(){var t=this;return this.adjustments.data.map((function(e){return _(_({},e),{},{showDetail:Object(y.b)("".concat(t.view,".get"),t.userPermisionsGroup),showEdit:Object(y.b)("".concat(t.view,".update"),t.userPermisionsGroup),showDelete:Object(y.b)("".concat(t.view,".delete"),t.userPermisionsGroup)})}))},sortOptions:function(){return this.fields.filter((function(t){return t.sortable})).map((function(t){return{text:t.label,value:t.key}}))}}),watch:{adjustments:function(t){this.totalRows=t.total,this.showInsert=Object(y.b)("".concat(this.view,".insert"),this.userPermisionsGroup),this.showList=Object(y.b)("".concat(this.view,".list"),this.userPermisionsGroup)}},created:function(){this.search()},methods:_(_(_(_({},Object(l.b)(c.typesAdjustment.PATH,{getAdjustments:c.typesAdjustment.actions.GET_ADJUSTMENTS,setAdjustment:c.typesAdjustment.actions.SET_ADJUSTMENT,setShowModalForm:c.typesAdjustment.actions.SET_SHOW_MODAL_FORM,setTypeAction:c.typesAdjustment.actions.SET_TYPE_ACTION})),Object(l.b)(m.typesYard.PATH,{getYards:m.typesYard.actions.GET_YARDS})),Object(l.b)(f.typesMaterial.PATH,{getMaterials:f.typesMaterial.actions.GET_MATERIALS})),{},{showModal:function(t,e){var r=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var o,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=null,l=null,n.next=4,r.setTypeAction(e);case 4:if("create"===e){n.next=9;break}return n.next=7,r.setAdjustment(_({},t));case 7:o=t.material,l=t.yard;case 9:return console.log(o),console.log(l),n.next=13,r.searchMaterials(o);case 13:return n.next=15,r.searchYards(l);case 15:return n.next=17,r.setShowModalForm(!0);case 17:case"end":return n.stop()}}),n)})))()},search:function(){var data={perPage:this.perPage,page:this.currentPage,text:this.filter};this.getAdjustments(data)},searchYards:function(t){var data={text:"",yard:t,excludedYard:null};this.getYards(data)},searchMaterials:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return data={text:"",material:t,loaderState:!0,loaderStateClose:!0},r.next=3,e.getMaterials(data);case 3:case"end":return r.stop()}}),r)})))()}})},O=r(69),component=Object(O.a)(j,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-card",{attrs:{title:"Gestionar ajustes de inventario","sub-title":"Opciones de listar, crear, modificar y eliminar ajustes de inventario"}},[r("b-row",[r("b-col",{staticClass:"my-1",attrs:{lg:"12"}},[r("b-input-group",{staticClass:"mb-3 mt-5",attrs:{size:"sm"}},[r("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Buscar ..."},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),r("b-input-group-append",[r("b-button",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("Limpiar")]),t._v(" "),t.showInsert?r("b-button",{staticClass:"ml-3",on:{click:function(e){return t.showModal(null,"create")}}},[t._v("Nuevo")]):t._e()],1)],1)],1)],1),t._v(" "),t.showList?[r("b-table",{attrs:{striped:!0,bordered:!0,hover:!0,fixed:!0,items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":0,stacked:"md","show-empty":"",small:""},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[e.item.showEdit?r("b-button",{staticClass:"mr-1",attrs:{size:"sm",title:"Editar"},on:{click:function(r){return t.showModal(e.item,"edit")}}},[r("b-icon-pencil-fill")],1):t._e(),t._v(" "),e.item.showDelete?r("b-button",{staticClass:"mr-1",attrs:{size:"sm",title:"Eliminar"},on:{click:function(r){return t.showModal(e.item,"delete")}}},[r("b-icon-trash-fill")],1):t._e()]}},{key:"row-details",fn:function(e){return[r("b-card",[r("ul",t._l(e.item,(function(e,n){return r("div",{key:n},["_showDetails"!==n?r("li",[t._v("\n                "+t._s(n)+": "+t._s(e)+"\n              ")]):t._e()])})),0)])]}}],null,!1,3543098183)}),t._v(" "),r("b-row",[r("b-col",{staticClass:"my-1",staticStyle:{float:"right"},attrs:{sm:"9",md:"9"}},[r("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"fill",size:"sm",pills:""},on:{input:t.search},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),r("b-col",{staticClass:"my-1",staticStyle:{display:"inline-block"},attrs:{sm:"3",md:"3"}},[r("b-form-group",{staticClass:"mb-0",attrs:{label:"Por página","label-for":"per-page-select","label-cols-sm":"8","label-cols-md":"8","label-cols-lg":"8","label-align-sm":"right","label-size":"sm"}},[r("b-form-select",{attrs:{id:"per-page-select",options:t.pageOptions,size:"sm"},on:{change:t.search},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1)],1)]:t._e()],2)}),[],!1,null,null,null);e.default=component.exports},470:function(t,e,r){"use strict";r.r(e);r(14),r(13),r(11),r(15),r(12),r(16);var n=r(8),o=r(3),l=(r(32),r(31),r(42),r(75),r(33),r(70),r(119),r(30)),c=r(56),d=r(37),m=r(41),f=r(47),h=r(60);function y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var _={name:"modal-form",data:function(){return{id:"tiquet-modal",title:"Crear tiquet",textBtnSubmit:"Registrar",types:[{value:"A",text:"Aumento"},{value:"D",text:"Disminución"}],type:"A",yard:null,material:null,amount:null,observation:null,date:null,labelTextFieldRequired:"Campo obligatorio",labelTextFieldRequiredWeight:"Debe ser mayor a cero",disabledElements:!1}},watch:{typeAction:function(t){"create"===t&&(this.resetInfoModal(),this.title="Crear Ajuste",this.id="create-adjustment-modal",this.textBtnSubmit="Registrar",this.disabledElements=!1),"edit"===t&&(this.title="Modificar Ajuste",this.id="edit-adjustment-modal",this.textBtnSubmit="Guardar cambios",this.disabledElements=!1),"delete"===t&&(this.title="Eliminar Ajuste",this.id="delete-adjustment-modal",this.textBtnSubmit="Eliminar",this.disabledElements=!0)},adjustment:function(t){"edit"!==this.typeAction&&"delete"!==this.typeAction||(this.date=t.date,this.type=t.type,this.yard=parseInt(t.yard),this.material=parseInt(t.material),this.amount=this.formatDecimal(t.amount),this.observation=t.observation)}},components:{BIconX:r(0).Uw},computed:v(v(v(v(v({},Object(l.d)(c.typesAdjustment.PATH,["showModalForm","adjustment","typeAction"])),Object(l.d)(d.typesYard.PATH,["yards"])),Object(l.d)(f.typesMaterial.PATH,["materials"])),Object(l.d)(m.typesAuth.PATH,["dataSession"])),{},{stateType:function(){return!(!this.type||""===this.type)},stateYard:function(){return!(!this.yard||""===this.yard)},stateMaterial:function(){return!(!this.material||""===this.material)},stateAmount:function(){return!(!this.amount||""===this.amount||0===parseFloat(this.amount))}}),methods:v(v(v(v(v({},Object(l.b)(c.typesAdjustment.PATH,{setShowModalForm:c.typesAdjustment.actions.SET_SHOW_MODAL_FORM,save:c.typesAdjustment.actions.SAVE,delete:c.typesAdjustment.actions.DELETE,edit:c.typesAdjustment.actions.EDIT,setTypeAction:c.typesAdjustment.actions.SET_TYPE_ACTION})),Object(l.b)(d.typesYard.PATH,{getYards:d.typesYard.actions.GET_YARDS})),Object(l.b)(h.typesThird.PATH,{getSupplierThirds:h.typesThird.actions.GET_SUPPLIER_THIRDS,getCustomerThirds:h.typesThird.actions.GET_CUSTOMER_THIRDS,getConveyorThirds:h.typesThird.actions.GET_CONVEYOR_THIRDS})),Object(l.b)(f.typesMaterial.PATH,{getMaterials:f.typesMaterial.actions.GET_MATERIALS})),{},{resetInfoModal:function(){this.type="A",this.yard=null,this.material=null,this.amount=null,this.observation=null,this.date=null},handleForm:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.preventDefault(),"create"!==e.typeAction){r.next=4;break}return r.next=4,e.save({type:e.type,yard:e.yard,material:e.material,amount:e.amount.replace(/,/g,""),observation:e.observation});case 4:if("edit"!==e.typeAction){r.next=7;break}return r.next=7,e.edit({id:e.adjustment.id,type:e.type,yard:e.yard,material:e.material,amount:e.amount.replace(/,/g,""),observation:e.observation});case 7:if("delete"!==e.typeAction){r.next=10;break}return r.next=10,e.delete(e.adjustment.id);case 10:case"end":return r.stop()}}),r)})))()},searchYards:function(t){var data={text:t,yard:this.yard,excludedYard:null,loaderState:!1};this.getYards(data)},searchMaterials:function(t){var data={text:t,material:this.material,loaderState:!1};this.getMaterials(data)},upperFormatter:function(t){return t.toUpperCase()},formatDecimal:function(t){return"."===t||"0."===t?"0.":null===(t=(t=(t=null===t||""===t.toString().trim()||"-"===t.toString().trim()?0:t).toString().replace(/[^0-9.-]/g,"")).toString())||""===t||0===parseFloat(t)?0:(t=(t="0."===t.substring(0,2)?t:t.replace(/^0+/,"")).replace(/[^0-9.-]/g,""),t=(t=(t=parseFloat(t)<0?-1*parseFloat(t):t).toString().match(/^-?\d+(?:\.\d{0,2})?/)[0]).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))},closeModal:function(){this.setTypeAction(""),this.setShowModalForm(!1)}})},j=r(69),component=Object(j.a)(_,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-modal",{attrs:{id:t.id,size:"lg","no-close-on-backdrop":"","no-close-on-esc":""},scopedSlots:t._u([{key:"modal-header",fn:function(){return[r("h5",[t._v(t._s(t.title))]),t._v(" "),r("b-icon-x",{staticClass:"icon-close",attrs:{"font-scale":"2"},on:{click:function(e){return t.closeModal()}}})]},proxy:!0},{key:"modal-footer",fn:function(){return[r("div",{staticClass:"w-100"},[r("b-button",{staticClass:"float-right",attrs:{variant:"secondary",size:"sm"},on:{click:function(e){return t.closeModal()}}},[t._v("\n        Cancelar\n      ")])],1)]},proxy:!0}]),model:{value:t.showModalForm,callback:function(e){t.showModalForm=e},expression:"showModalForm"}},[t._v(" "),r("b-form",{on:{submit:t.handleForm}},[null!==t.date&&""!==t.date?r("b-form-group",{staticClass:"mb-1"},[r("label",{staticClass:"mb-0",attrs:{for:"feedback-date"}},[t._v("Fecha")]),t._v(" "),r("b-form-input",{attrs:{id:"feedback-date",type:"text",disabled:!0},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1):t._e(),t._v(" "),r("b-form-group",{staticClass:"mb-1"},[r("label",{staticClass:"mb-0",attrs:{for:"feedback-type"}},[t._v("Tipo")]),t._v(" "),r("b-form-select",{attrs:{id:"feedback-type",options:t.types,disabled:t.disabledElements},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),t._v(" "),r("b-form-invalid-feedback",{attrs:{state:t.stateType}},[t._v("\n        "+t._s(t.labelTextFieldRequired)+"\n      ")])],1),t._v(" "),r("b-form-group",{staticClass:"mb-1"},[r("label",{staticClass:"mb-0",attrs:{for:"feedback-yard"}},[t._v("Patio")]),t._v(" "),t.yards&&t.yards.data?r("v-select",{attrs:{filterable:!1,id:"feedback-yard",disabled:t.disabledElements,options:t.yards.data,label:"name",reduce:function(data){return data.id}},on:{search:t.searchYards,close:t.searchYards,open:t.searchYards},model:{value:t.yard,callback:function(e){t.yard=e},expression:"yard"}}):t._e(),t._v(" "),r("b-form-invalid-feedback",{attrs:{state:t.stateYard}},[t._v("\n        "+t._s(t.labelTextFieldRequired)+"\n      ")])],1),t._v(" "),r("b-form-group",{staticClass:"mb-1"},[r("label",{staticClass:"mb-0",attrs:{for:"feedback-material"}},[t._v("Material")]),t._v(" "),t.materials&&t.materials.data?r("v-select",{attrs:{filterable:!1,id:"feedback-material",disabled:t.disabledElements,options:t.materials.data,label:"name",reduce:function(data){return data.id}},on:{search:t.searchMaterials,close:t.searchMaterials,open:t.searchMaterials},model:{value:t.material,callback:function(e){t.material=e},expression:"material"}}):t._e(),t._v(" "),r("b-form-invalid-feedback",{attrs:{state:t.stateMaterial}},[t._v("\n        "+t._s(t.labelTextFieldRequired)+"\n      ")])],1),t._v(" "),r("b-form-group",{staticClass:"mb-1"},[r("label",{staticClass:"mb-0",attrs:{for:"feedback-amount"}},[t._v("Cantidad")]),t._v(" "),r("b-form-input",{attrs:{id:"feedback-amount",type:"text",disabled:t.disabledElements,maxlength:"15",formatter:t.formatDecimal},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),t._v(" "),r("b-form-invalid-feedback",{attrs:{state:t.stateAmount}},[t._v("\n        "+t._s(t.labelTextFieldRequired)+"\n      ")])],1),t._v(" "),r("b-form-group",[r("label",{attrs:{for:"feedbackobservation"}},[t._v("Observaciones")]),t._v(" "),r("b-form-textarea",{attrs:{id:"feedbackobservation",maxlength:"200","no-resize":"",rows:"3",disabled:t.disabledElements},model:{value:t.observation,callback:function(e){t.observation=e},expression:"observation"}})],1),t._v(" "),r("b-button",{staticClass:"form-control",attrs:{id:"button-submit",type:"submit",href:"#",variant:"primary",disabled:!1},on:{click:t.handleForm}},[t._v("\n      "+t._s(t.textBtnSubmit)+"\n    ")])],1)],1)}),[],!1,null,null,null);e.default=component.exports},507:function(t,e,r){"use strict";r.r(e);var n=r(469),o=r(470),l={name:"Adjustment",layout:"menu",components:{TableList:n.default,ModalForm:o.default},data:function(){return{}},computed:{},mounted:function(){},methods:{}},c=r(69),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{attrs:{fluid:""}},[r("table-list"),t._v(" "),r("modal-form")],1)}),[],!1,null,null,null);e.default=component.exports}}]);